<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowLedge - Smart Money Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .page { 
            display: none; 
        }
        
        .page.active { 
            display: block; 
        }
        
        .transaction-row:hover { 
            background-color: rgba(0,0,0,0.05); 
        }
        
        .goal-progress { 
            transition: width 0.5s ease-in-out; 
        }
        
        .fade-in { 
            animation: fadeIn 0.3s ease-in; 
        }
        
        @keyframes fadeIn { 
            from { opacity: 0; } to { opacity: 1; } 
        }
        
        .modal { 
            display: none; 
            position: fixed; 
            z-index: 50; 
            left: 0; 
            top: 0; 
            width: 100%; 
            height: 100%; 
            background-color: rgba(0,0,0,0.5); 
        }
        
        .modal.active { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        
        .profile-image { 
            width: 40px; 
            height: 40px; 
            border-radius: 50%; 
            object-fit: cover; 
        }
        
        .large-profile-image { 
            width: 100px; 
            height: 100px; 
            border-radius: 50%; 
            object-fit: cover; 
        }
        
        /* New styles */
        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: #f0fdfa;
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .card {
            background: linear-gradient(to bottom right, #f0fdfa, #ccfbf1);
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .insight-card {
            transition: all 0.3s ease;
        }
        
        .insight-card:hover {
            transform: translateX(5px);
        }
        
        .btn-export {
            border-radius: 8px;
            font-weight: 500;
            padding: 10px 20px;
            transition: all 0.3s ease;
        }
        
        .btn-csv {
            background-color: #0ea5e9;
            color: white;
        }
        
        .btn-csv:hover {
            background-color: #0284c7;
        }
        
        .btn-pdf {
            background-color: #dc2626;
            color: white;
        }
        
        .btn-pdf:hover {
            background-color: #b91c1c;
        }
        
        .loading-spinner {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            align-items: center;
            justify-content: center;
        }
        
        .loading-spinner.active {
            display: flex;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #14b8a6;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .progress-bar {
            height: 6px;
            background-color: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #14b8a6;
            border-radius: 3px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background-color: #10b981;
        }
        
        .notification.error {
            background-color: #ef4444;
        }
        
        .notification.warning {
            background-color: #f59e0b;
        }
        
        .notification.info {
            background-color: #3b82f6;
        }
        
        .profile-dropdown {
            position: relative;
        }
        
        .profile-dropdown-menu {
            position: absolute;
            right: 0;
            top: 100%;
            margin-top: 10px;
            width: 200px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            z-index: 50;
            display: none;
        }
        
        .profile-dropdown-menu.active {
            display: block;
        }
        
        .profile-dropdown-item {
            padding: 10px 15px;
            display: flex;
            align-items: center;
            color: #4b5563;
            transition: background-color 0.2s;
        }
        
        .profile-dropdown-item:hover {
            background-color: #f3f4f6;
        }
        
        .mini-chart {
            height: 40px;
            margin-top: 10px;
        }
        
        /* New styles for improvements */
        .welcome-banner {
            background: linear-gradient(90deg, #14b8a6, #0d9488);
            color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem 1rem;
            text-align: center;
        }
        
        .empty-state-icon {
            font-size: 4rem;
            color: #cbd5e0;
            margin-bottom: 1rem;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .transaction-card {
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            display: none;
        }
        
        @media (max-width: 640px) {
            .transaction-card {
                display: block;
            }
            
            .transaction-table {
                display: none;
            }
        }
        
        .settings-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .recurring-form {
            background-color: #f9fafb;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .category-colors {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .category-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        /* Tutorial styles */
        .tutorial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .tutorial-overlay.active {
            display: flex;
        }
        
        .tutorial-highlight {
            position: absolute;
            border-radius: 8px;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.7);
            transition: all 0.3s ease;
            z-index: 1001;
        }
        
        .tutorial-content {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            padding: 20px 30px;
            max-width: 90%;
            width: 500px;
            z-index: 1002;
        }
        
        .tutorial-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #14b8a6;
        }
        
        .tutorial-description {
            color: #4b5563;
            margin-bottom: 20px;
        }
        
        .tutorial-navigation {
            display: flex;
            justify-content: space-between;
        }
        
        .tutorial-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .tutorial-btn-primary {
            background-color: #14b8a6;
            color: white;
        }
        
        .tutorial-btn-primary:hover {
            background-color: #0d9488;
        }
        
        .tutorial-btn-secondary {
            background-color: #e5e7eb;
            color: #4b5563;
        }
        
        .tutorial-btn-secondary:hover {
            background-color: #d1d5db;
        }
        
        .tutorial-step-indicator {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
        
        .tutorial-step-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #d1d5db;
            margin: 0 4px;
        }
        
        .tutorial-step-dot.active {
            background-color: #14b8a6;
        }
        
        /* Chatbot styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 999;
        }
        
        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #14b8a6;
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s ease;
        }
        
        .chatbot-toggle:hover {
            background-color: #0d9488;
            transform: scale(1.05);
        }
        
        .chatbot-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            overflow: hidden;
        }
        
        .chatbot-window.active {
            display: flex;
        }
        
        .chatbot-header {
            background-color: #14b8a6;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chatbot-close {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
        }
        
        .chatbot-body {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .chatbot-category {
            margin-bottom: 20px;
        }
        
        .chatbot-category-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #14b8a6;
        }
        
        .chatbot-question {
            background-color: #f3f4f6;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .chatbot-question:hover {
            background-color: #e5e7eb;
        }
        
        .chatbot-answer {
            background-color: #f0fdfa;
            border-left: 4px solid #14b8a6;
            border-radius: 0 8px 8px 0;
            padding: 10px;
            margin-top: 8px;
            margin-bottom: 15px;
            display: none;
        }
        
        .chatbot-answer.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <!-- Loading Spinner -->
    <div id="loading-spinner" class="loading-spinner">
        <div class="bg-white p-6 rounded-xl shadow-lg text-center">
            <div class="spinner mx-auto mb-4"></div>
            <p class="text-gray-700">Processing your request...</p>
        </div>
    </div>

    <!-- Main Tutorial Overlay -->
    <div id="main-tutorial-overlay" class="tutorial-overlay">
        <div class="tutorial-highlight"></div>
        <div class="tutorial-content">
            <h3 class="tutorial-title">Welcome to FlowLedge</h3>
            <p class="tutorial-description">Let's take a quick tour to help you get started with managing your finances.</p>
            <div class="tutorial-navigation">
                <button class="tutorial-btn tutorial-btn-secondary" onclick="skipMainTutorial()">Skip</button>
                <button class="tutorial-btn tutorial-btn-primary" onclick="nextMainTutorialStep()">Next</button>
            </div>
            <div class="tutorial-step-indicator">
                <div class="tutorial-step-dot active"></div>
                <div class="tutorial-step-dot"></div>
                <div class="tutorial-step-dot"></div>
                <div class="tutorial-step-dot"></div>
                <div class="tutorial-step-dot"></div>
                <div class="tutorial-step-dot"></div>
            </div>
        </div>
    </div>

    <!-- Tutorial Overlay -->
    <div id="tutorial-overlay" class="tutorial-overlay">
        <div class="tutorial-highlight"></div>
        <div class="tutorial-content">
            <h3 class="tutorial-title">Settings Tutorial</h3>
            <p class="tutorial-description">Learn how to customize your FlowLedge experience.</p>
            <div class="tutorial-navigation">
                <button class="tutorial-btn tutorial-btn-secondary" onclick="skipTutorial()">Skip</button>
                <button class="tutorial-btn tutorial-btn-primary" onclick="nextTutorialStep()">Next</button>
            </div>
            <div class="tutorial-step-indicator">
                <div class="tutorial-step-dot active"></div>
                <div class="tutorial-step-dot"></div>
                <div class="tutorial-step-dot"></div>
                <div class="tutorial-step-dot"></div>
                <div class="tutorial-step-dot"></div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="bg-gradient-to-r from-teal-600 to-teal-700 text-white shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-chart-line text-2xl"></i>
                <h1 class="text-xl font-bold">FlowLedge</h1>
            </div>
            
            <div class="hidden md:flex space-x-6">
                <button onclick="showPage('home')" class="nav-link nav-btn hover:text-teal-200 transition">Home</button>
                <button onclick="showPage('union-report')" class="nav-link nav-btn hover:text-teal-200 transition">Union Report</button>
                <button onclick="showPage('dashboard')" class="nav-link nav-btn hover:text-teal-200 transition">Dashboard</button>
                <button onclick="showPage('reports')" class="nav-link nav-btn hover:text-teal-200 transition">Reports</button>
                <button onclick="startSettingsTutorial()" class="nav-link nav-btn hover:text-teal-200 transition settings-link">
                    <i class="fas fa-cog"></i> Settings
                </button>
                <button onclick="showPage('about')" class="nav-link nav-btn hover:text-teal-200 transition">About</button>
            </div>
            
            <div class="flex items-center space-x-4">
                <div id="auth-buttons">
                    <!-- Auth buttons will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <div class="md:hidden bg-teal-700 text-white p-2 flex justify-around">
        <button onclick="showPage('home')" class="p-2"><i class="fas fa-home"></i></button>
        <button onclick="showPage('union-report')" class="p-2"><i class="fas fa-chart-bar"></i></button>
        <button onclick="showPage('dashboard')" class="p-2"><i class="fas fa-chart-pie"></i></button>
        <button onclick="showPage('reports')" class="p-2"><i class="fas fa-file-alt"></i></button>
        <button onclick="startSettingsTutorial()" class="p-2"><i class="fas fa-cog"></i></button>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal">
        <div class="bg-white rounded-xl shadow-lg p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <i class="fas fa-wallet text-4xl text-teal-600 mb-4"></i>
                <h1 class="text-3xl font-bold text-teal-700">Welcome to FlowLedge</h1>
                <p class="text-gray-600">Sign in to your account</p>
            </div>
            
            <form id="login-form" class="space-y-4">
                <div>
                    <label class="block text-gray-700 mb-2">Admission Number</label>
                    <input type="text" id="login-username" placeholder="Enter your admission number" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" required>
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">Password</label>
                    <input type="password" id="login-password" placeholder="eg :add 00 before your ad.no" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" required>
                </div>
                
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input type="checkbox" id="remember-me" class="mr-2 h-4 w-4 text-teal-600 rounded focus:ring-teal-500">
                        <label for="remember-me">Remember me</label>
                    </div>
                    <a href="#" class="text-teal-600 hover:text-teal-800 transition">Forgot Password?</a>
                </div>
                
                <div class="flex justify-center">
                    <button type="submit" class="bg-teal-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-teal-700 transition">
                        Sign In
                    </button>
                </div>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-gray-600">Contact administrator for account issues</p>
            </div>
            
            <div class="mt-4 flex justify-end">
                <button onclick="closeLoginModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <!-- Home Page -->
        <div id="home" class="page active fade-in">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-teal-700 mb-4">swahwa financial web</h1>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto mb-8">Track expenses, analyze spending patterns</p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <button onclick="showPage('union-report')" class="bg-teal-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-teal-700 transition shadow-lg">
                        View Union Report <i class="fas fa-chart-bar ml-2"></i>
                    </button>
                    <button onclick="showPage('dashboard')" class="bg-white text-teal-600 px-8 py-3 rounded-lg text-lg font-semibold hover:bg-teal-100 transition shadow-lg">
                        Personal Dashboard <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <div class="grid md:grid-cols-3 gap-8 mb-16">
                <div class="card p-6 text-center">
                    <div class="bg-teal-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-chart-line text-teal-600 text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Track Everything</h3>
                    <p class="text-gray-600">Monitor income, expenses, and savings in one place</p>
                </div>
                
                <div class="card p-6 text-center">
                    <div class="bg-teal-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-chart-pie text-teal-600 text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Analyze Spending</h3>
                    <p class="text-gray-600">Visual reports show where your money goes</p>
                </div>
                
                <div class="card p-6 text-center">
                    <div class="bg-teal-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-piggy-bank text-teal-600 text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Save Smarter</h3>
                    <p class="text-gray-600">Set goals and track your progress</p>
                </div>
            </div>

            <div class="card p-8 mb-12">
                <h2 class="text-2xl font-bold mb-6 text-center">Union Financial Overview</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-teal-50 p-6 rounded-lg text-center">
                        <p class="text-gray-600">Total Income</p>
                        <p class="text-3xl font-bold text-teal-700">$<span id="union-income">0</span></p>
                    </div>
                    <div class="bg-red-50 p-6 rounded-lg text-center">
                        <p class="text-gray-600">Total Expenses</p>
                        <p class="text-3xl font-bold text-red-700">$<span id="union-expenses">0</span></p>
                    </div>
                    <div class="bg-gray-100 p-6 rounded-lg text-center">
                        <p class="text-gray-600">Net Balance</p>
                        <p class="text-3xl font-bold text-gray-800">$<span id="union-balance">0</span></p>
                    </div>
                </div>
                <div class="text-center mt-6">
                    <button onclick="showPage('union-report')" class="bg-teal-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-teal-700 transition">
                        View Full Union Report <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Union Report Page -->
        <div id="union-report" class="page fade-in">
            <h1 class="text-3xl font-bold mb-8 text-teal-700">Union Financial Report</h1>
            
            <div class="card p-6 mb-8">
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-teal-50 p-6 rounded-lg text-center">
                        <p class="text-gray-600">Total Income</p>
                        <p class="text-3xl font-bold text-teal-700">$<span id="union-report-income">0</span></p>
                    </div>
                    <div class="bg-red-50 p-6 rounded-lg text-center">
                        <p class="text-gray-600">Total Expenses</p>
                        <p class="text-3xl font-bold text-red-700">$<span id="union-report-expenses">0</span></p>
                    </div>
                    <div class="bg-gray-100 p-6 rounded-lg text-center">
                        <p class="text-gray-600">Net Balance</p>
                        <p class="text-3xl font-bold text-gray-800">$<span id="union-report-balance">0</span></p>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4">Union Spending Insights</h3>
                    <div id="union-insights-container" class="space-y-3">
                        <p class="text-gray-600">Generating insights...</p>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4 mb-6">
                    <div class="tooltip">
                        <button onclick="exportUnionToCSV()" class="btn-export btn-csv text-white flex items-center">
                            <i class="fas fa-file-csv mr-2"></i>Export CSV
                        </button>
                        <span class="tooltiptext">Export as CSV</span>
                    </div>
                    <div class="tooltip">
                        <button onclick="exportUnionToPDF()" class="btn-export btn-pdf text-white flex items-center">
                            <i class="fas fa-file-pdf mr-2"></i>Export PDF
                        </button>
                        <span class="tooltiptext">Export as PDF</span>
                    </div>
                </div>
            </div>
            
            <div class="card p-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                    <h2 class="text-xl font-bold">All Transactions</h2>
                    <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                        <input type="text" id="union-search" placeholder="Search transactions..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <select id="union-category-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="all">All Categories</option>
                            <option value="Food">Food</option>
                            <option value="bus fair">bus fair</option>
                            <option value="monthly fee">monthly fee</option>
                            <option value="Entertainment">SSLC</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="text-left text-gray-600 border-b">
                                <th class="pb-3">Date</th>
                                <th class="pb-3">User</th>
                                <th class="pb-3">Description</th>
                                <th class="pb-3">Category</th>
                                <th class="pb-3">Type</th>
                                <th class="pb-3">Amount</th>
                            </tr>
                        </thead>
                        <tbody id="union-transactions-list">
                            <!-- Transactions will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard" class="page fade-in">
            <!-- Welcome Banner -->
            <div id="welcome-banner" class="welcome-banner" style="display: none;">
                <div>
                    <h3 class="text-lg font-semibold">Welcome to FlowLedge!</h3>
                    <p>Start by adding your first income or expense transaction.</p>
                </div>
                <button onclick="closeWelcomeBanner()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold text-teal-700">Financial Dashboard</h1>
                <div id="user-welcome" class="text-lg font-semibold flex items-center space-x-3">
                    <!-- User profile image and name will be inserted here -->
                </div>
            </div>
            
            <!-- Budget Alert Banner -->
            <div id="budget-alert" class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 hidden">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas fa-exclamation-triangle text-yellow-400"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-yellow-700">
                            <span class="font-medium">Budget Alert!</span> You've exceeded your monthly budget limit.
                        </p>
                    </div>
                    <div class="ml-auto pl-3">
                        <div class="-mx-1.5 -my-1.5">
                            <button onclick="closeBudgetAlert()" class="inline-flex bg-yellow-50 rounded-md p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Balance Overview -->
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="card p-6">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-gray-600">Total Income</p>
                            <p class="text-2xl font-bold text-green-600">$<span id="total-income">0</span></p>
                        </div>
                        <div class="bg-green-100 p-3 rounded-full">
                            <i class="fas fa-arrow-up text-green-600 text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="card p-6">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-gray-600">Total Expenses</p>
                            <p class="text-2xl font-bold text-red-600">$<span id="total-expenses">0</span></p>
                        </div>
                        <div class="bg-red-100 p-3 rounded-full">
                            <i class="fas fa-arrow-down text-red-600 text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="card p-6">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-gray-600">Current Balance</p>
                            <p class="text-2xl font-bold text-teal-600">$<span id="current-balance">0</span></p>
                        </div>
                        <div class="bg-teal-100 p-3 rounded-full">
                            <i class="fas fa-wallet text-teal-600 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8 mb-8">
                <!-- Add Transaction Form -->
                <div class="card p-6">
                    <h2 class="text-xl font-bold mb-4">Add Transaction</h2>
                    <form id="transaction-form" class="space-y-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Type</label>
                            <select id="transaction-type" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                <option value="income">Income</option>
                                <option value="expense">Expense</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Amount</label>
                            <input type="number" id="transaction-amount" placeholder="0.00" step="0.01" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Category</label>
                            <select id="transaction-category" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                <option value="Food">Food</option>
                                <option value="Bus Fair">Bus Fair</option>
                                <option value="Monthly Fee">Monthly Fee</option>
                                <option value="SSLC">SSLC</option>
                                <option value="Healthcare">Healthcare</option>
                                <option value="Other">Other</option>
                            </select>
                            <div class="category-colors">
                                <div class="category-color" style="background-color: #FF6384;"></div>
                                <div class="category-color" style="background-color: #36A2EB;"></div>
                                <div class="category-color" style="background-color: #FFCE56;"></div>
                                <div class="category-color" style="background-color: #4BC0C0;"></div>
                                <div class="category-color" style="background-color: #9966FF;"></div>
                                <div class="category-color" style="background-color: #FF9F40;"></div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Date</label>
                            <input type="date" id="transaction-date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Notes</label>
                            <input type="text" id="transaction-notes" placeholder="Optional notes" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        </div>
                        
                        <button type="submit" class="w-full bg-teal-600 text-white py-3 rounded-lg font-semibold hover:bg-teal-700 transition">
                            Add Transaction
                        </button>
                    </form>
                    
                    <!-- Recurring Transactions Form -->
                    <div class="recurring-form mt-6">
                        <h3 class="font-semibold mb-3">Recurring Transaction</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 mb-2">Frequency</label>
                                <select id="recurring-frequency" class="w-full p-2 border border-gray-300 rounded-lg">
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">End Date (Optional)</label>
                                <input type="date" id="recurring-end-date" class="w-full p-2 border border-gray-300 rounded-lg">
                            </div>
                        </div>
                        <button onclick="addRecurringTransaction()" class="mt-3 w-full bg-gray-600 text-white py-2 rounded-lg font-medium hover:bg-gray-700 transition">
                            Set Up Recurring Transaction
                        </button>
                    </div>
                </div>
                
                <!-- Expense Chart -->
                <div class="card p-6">
                    <h2 class="text-xl font-bold mb-4">Expense Breakdown</h2>
                    <div class="h-64">
                        <canvas id="expense-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recent Transactions -->
            <div class="card p-6 mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                    <h2 class="text-xl font-bold">Recent Transactions</h2>
                    <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                        <input type="text" id="transaction-search" placeholder="Search transactions..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <select id="transaction-sort" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="date-desc">Date (Newest First)</option>
                            <option value="date-asc">Date (Oldest First)</option>
                            <option value="amount-desc">Amount (High to Low)</option>
                            <option value="amount-asc">Amount (Low to High)</option>
                            <option value="category">Category</option>
                        </select>
                        <div class="tooltip">
                            <button onclick="clearTransactions()" class="bg-red-100 text-red-600 px-4 py-2 rounded-lg font-medium hover:bg-red-200 transition">
                                <i class="fas fa-trash-alt mr-1"></i> Clear All
                            </button>
                            <span class="tooltiptext">Delete all transactions</span>
                        </div>
                    </div>
                </div>
                
                <!-- Table for larger screens -->
                <div class="overflow-x-auto transaction-table">
                    <table class="w-full">
                        <thead>
                            <tr class="text-left text-gray-600 border-b">
                                <th class="pb-3">Date</th>
                                <th class="pb-3">Description</th>
                                <th class="pb-3 hidden sm:table-cell">Category</th>
                                <th class="pb-3">Amount</th>
                                <th class="pb-3">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-list">
                            <!-- Transactions will be populated here -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Card view for mobile -->
                <div id="transactions-cards" class="transaction-cards">
                    <!-- Transaction cards will be populated here -->
                </div>
            </div>
        </div>

        <!-- Reports Page -->
        <div id="reports" class="page fade-in">
            <h1 class="text-3xl font-bold mb-8 text-teal-700">Financial Reports</h1>
            
            <div class="card p-6 mb-8">
                <div class="flex flex-wrap gap-4 mb-6">
                    <div>
                        <label class="block text-gray-700 mb-2">Time Range</label>
                        <select id="report-time-range" class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="this-month">This Month</option>
                            <option value="last-month">Last Month</option>
                            <option value="this-year">This Year</option>
                            <option value="all">All Time</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">From Date</label>
                        <input type="date" id="report-from" class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">To Date</label>
                        <input type="date" id="report-to" class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">Category</label>
                        <select id="report-category" class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                            <option value="all">All Categories</option>
                            <option value="Food">Food</option>
                            <option value="Bus Fair">Bus Fair</option>
                            <option value="Monthly Fee">Monthly Fee</option>
                            <option value="SSLC">SSLC</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button onclick="generateReport()" class="bg-teal-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-teal-700 transition">
                            Generate Report
                        </button>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-teal-50 p-4 rounded-lg">
                        <p class="text-gray-600">Total Income</p>
                        <p class="text-2xl font-bold text-teal-700">$<span id="report-income">0</span></p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg">
                        <p class="text-gray-600">Total Expenses</p>
                        <p class="text-2xl font-bold text-red-700">$<span id="report-expenses">0</span></p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <p class="text-gray-600">Net Balance</p>
                        <p class="text-2xl font-bold text-gray-800">$<span id="report-balance">0</span></p>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4">Spending Insights</h3>
                    <div id="insights-container" class="space-y-3">
                        <p class="text-gray-600">Generate a report to see insights</p>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4">
                    <div class="tooltip">
                        <button onclick="exportToCSV()" class="btn-export btn-csv text-white flex items-center">
                            <i class="fas fa-file-csv mr-2"></i>Export CSV
                        </button>
                        <span class="tooltiptext">Export as CSV</span>
                    </div>
                    <div class="tooltip">
                        <button onclick="exportToPDF()" class="btn-export btn-pdf text-white flex items-center">
                            <i class="fas fa-file-pdf mr-2"></i>Export PDF
                        </button>
                        <span class="tooltiptext">Export as PDF</span>
                    </div>
                </div>
            </div>
            
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-6">Monthly Summary</h2>
                <div class="h-80">
                    <canvas id="monthly-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Account Page -->
        <div id="account" class="page fade-in">
            <h1 class="text-3xl font-bold mb-8 text-teal-700">Account Settings</h1>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="card p-6">
                    <h2 class="text-xl font-bold mb-6">Profile Information</h2>
                    <div class="flex flex-col items-center mb-6">
                        <img id="account-profile-image" src="" alt="Profile" class="large-profile-image mb-4">
                        <h3 id="account-profile-name" class="text-xl font-semibold"></h3>
                        <p id="account-profile-id" class="text-gray-600"></p>
                    </div>
                    <form id="profile-form" class="space-y-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Admission Number</label>
                            <input type="text" id="profile-admission" readonly class="w-full p-3 border border-gray-300 rounded-lg bg-gray-100">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Full Name</label>
                            <input type="text" id="profile-name" placeholder="Your Name" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Email</label>
                            <input type="email" id="profile-email" placeholder="your@email.com" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Password</label>
                            <input type="password" id="profile-password" placeholder="" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        </div>
                        
                        <button type="submit" class="w-full bg-teal-600 text-white py-3 rounded-lg font-semibold hover:bg-teal-700 transition">
                            Update Profile
                        </button>
                    </form>
                </div>
                
                <div class="card p-6">
                    <h2 class="text-xl font-bold mb-6">Preferences</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-gray-700 mb-2">Currency</label>
                            <select id="currency" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                <option value="INR">Indian Rupees (INR)</option>
                                <option value="USD">US Dollars (USD)</option>
                                <option value="EUR">Euro (EUR)</option>
                                <option value="GBP">British Pound (GBP)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Date Format</label>
                            <select id="date-format" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                                <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Budget Alerts</label>
                            <div class="flex items-center">
                                <input type="checkbox" id="budget-alerts" class="mr-3 h-5 w-5 text-teal-600 rounded focus:ring-teal-500">
                                <label for="budget-alerts">Enable budget limit alerts</label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 mb-2">Monthly Budget Limit</label>
                            <input type="number" id="budget-limit" placeholder="0.00" step="0.01" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card p-6 mt-8">
                <h2 class="text-xl font-bold mb-6">Data Management</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-semibold mb-3">Backup Your Data</h3>
                        <p class="text-gray-600 mb-4">Export all your financial data as a JSON file</p>
                        <button onclick="exportData()" class="bg-teal-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-teal-700 transition">
                            <i class="fas fa-download mr-2"></i>Export Data
                        </button>
                    </div>
                    
                    <div>
                        <h3 class="font-semibold mb-3">Restore Data</h3>
                        <p class="text-gray-600 mb-4">Import previously exported data</p>
                        <input type="file" id="import-file" accept=".json" class="hidden">
                        <button onclick="document.getElementById('import-file').click()" class="bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition">
                            <i class="fas fa-upload mr-2"></i>Import Data
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card p-6 mt-8">
                <h2 class="text-xl font-bold mb-6">Custom Categories</h2>
                <div class="mb-4">
                    <div class="flex gap-2 mb-4">
                        <input type="text" id="new-category" placeholder="Add new category" class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <button onclick="addCustomCategory()" class="bg-teal-600 text-white px-4 py-3 rounded-lg font-semibold hover:bg-teal-700 transition">
                            Add
                        </button>
                    </div>
                    <div id="custom-categories-list" class="flex flex-wrap gap-2">
                        <!-- Custom categories will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- About Page -->
        <div id="about" class="page fade-in">
            <h1 class="text-3xl font-bold mb-8 text-teal-700">About FlowLedge</h1>
            
            <div class="card p-8 mb-8">
                <div class="max-w-3xl mx-auto">
                    <p class="text-lg text-gray-700 mb-6">
                        FlowLedge is a comprehensive money management platform designed to help individuals and families take control of their finances. Our mission is to make financial tracking simple, insightful, and empowering.
                    </p>
                    
                    <p class="text-lg text-gray-700 mb-6">
                        Founded with the belief that everyone deserves financial clarity, FlowLedge combines powerful analytics with an intuitive interface to help you understand your spending habits, achieve your savings goals, and build a better financial future.
                    </p>
                    
                    <div class="grid md:grid-cols-3 gap-6 my-8">
                        <div class="text-center">
                            <div class="bg-teal-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-shield-alt text-teal-600 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-2">Secure</h3>
                            <p class="text-gray-600">Your data is encrypted and protected with industry-standard security measures.</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="bg-teal-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-chart-line text-teal-600 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-2">Insightful</h3>
                            <p class="text-gray-600">Get actionable insights about your spending patterns and financial health.</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="bg-teal-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-mobile-alt text-teal-600 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-2">Accessible</h3>
                            <p class="text-gray-600">Manage your finances anytime, anywhere with our responsive design.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fas fa-wallet text-2xl text-teal-400"></i>
                        <h3 class="text-xl font-bold">FlowLedge</h3>
                    </div>
                    <p class="text-gray-400">Smart money management for everyone.</p>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#" onclick="showPage('home')" class="text-gray-400 hover:text-white transition">Home</a></li>
                        <li><a href="#" onclick="showPage('union-report')" class="text-gray-400 hover:text-white transition">Union Report</a></li>
                        <li><a href="#" onclick="showPage('dashboard')" class="text-gray-400 hover:text-white transition">Dashboard</a></li>
                        <li><a href="#" onclick="showPage('about')" class="text-gray-400 hover:text-white transition">About</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Legal</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Terms of Service</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Cookie Policy</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Contact</h4>
                    <p class="text-gray-400 mb-2">Email: rifadwork@gmail.com</p>
                    <p class="text-gray-400">WhatsApp: +918606218631</p>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2025 FlowLedge. All rights reserved.</p>
                <p>&copy; Designed by Rifad</p>
            </div>
        </div>
    </footer>

    <!-- Chatbot -->
    <div class="chatbot-container">
        <button id="chatbot-toggle" class="chatbot-toggle" onclick="toggleChatbot()">
            <i class="fas fa-comments"></i>
        </button>
        
        <div id="chatbot-window" class="chatbot-window">
            <div class="chatbot-header">
                <h3>FlowLedge Assistant</h3>
                <button class="chatbot-close" onclick="toggleChatbot()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="chatbot-body">
                <div class="chatbot-category">
                    <div class="chatbot-category-title"> Basic Info</div>
                    <div class="chatbot-question" onclick="toggleAnswer(this)">What is FlowLedger?</div>
                    <div class="chatbot-answer">FlowLedger is a smart money ledger that helps you track your income, expenses, and savings easily.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">How can I start using FlowLedger?</div>
                    <div class="chatbot-answer">Just create an account, log in, and add your first income or expense entry. You'll instantly see your balance and reports update.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">Is FlowLedger free to use?</div>
                    <div class="chatbot-answer">Yes, FlowLedger is completely free for personal use.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">Can I use FlowLedger on mobile?</div>
                    <div class="chatbot-answer">Yes, the site is fully responsive and works smoothly on mobile and tablet screens.</div>
                </div>
                
                <div class="chatbot-category">
                    <div class="chatbot-category-title"> Transactions</div>
                    <div class="chatbot-question" onclick="toggleAnswer(this)">How do I add a new transaction?</div>
                    <div class="chatbot-answer">Go to the "Add Transaction" section, choose income or expense, select a category, enter the amount, date, and notes, then click "Save."</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">Can I edit or delete a transaction?</div>
                    <div class="chatbot-answer">Yes, open your transaction list and click the edit or delete icon beside the item you want to change.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">How can I search or filter my transactions?</div>
                    <div class="chatbot-answer">Use the search bar or category filter to quickly find specific transactions.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">What do the categories mean?</div>
                    <div class="chatbot-answer">Categories help organize your spending, like Food, Bus Fare, Monthly Bills, or Other. You can add your own categories in settings.</div>
                </div>
                
                <div class="chatbot-category">
                    <div class="chatbot-category-title"> Reports & Insights</div>
                    <div class="chatbot-question" onclick="toggleAnswer(this)">Where can I see my income and expense reports?</div>
                    <div class="chatbot-answer">Visit the "Reports" tab to view charts and summaries of your monthly or yearly transactions.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">How do I know if I'm overspending?</div>
                    <div class="chatbot-answer">If you've set a budget limit, FlowLedger will alert you when you cross your limit for the month.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">Can I export my data?</div>
                    <div class="chatbot-answer">Yes, you can export all transactions to a CSV file for backup or use in Excel or Google Sheets.</div>
                </div>
                
                <div class="chatbot-category">
                    <div class="chatbot-category-title"> Settings & Features</div>
                    <div class="chatbot-question" onclick="toggleAnswer(this)">How can I change the currency?</div>
                    <div class="chatbot-answer">Go to the Settings section and select your preferred currency from the dropdown menu.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">What does "Recurring Transaction" mean?</div>
                    <div class="chatbot-answer">It automatically adds repeated entries, like monthly rent or salary, without you entering them manually every time.</div>
                </div>
                
                <div class="chatbot-category">
                    <div class="chatbot-category-title"> Account & Privacy</div>
                    <div class="chatbot-question" onclick="toggleAnswer(this)">Is my financial data safe?</div>
                    <div class="chatbot-answer">Yes, your data is stored securely and never shared. Always log out after using on a shared device.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">I forgot my password, what should I do?</div>
                    <div class="chatbot-answer">Click "Forgot Password?" on the login page and follow the steps to reset it via email.</div>
                </div>
                
                <div class="chatbot-category">
                    <div class="chatbot-category-title"> Tips & Help</div>
                    <div class="chatbot-question" onclick="toggleAnswer(this)">How do I track my monthly savings?</div>
                    <div class="chatbot-answer">Enter both income and expenses. Your remaining balance automatically shows how much you've saved.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">How can I make my dashboard more organized?</div>
                    <div class="chatbot-answer">Use clear categories, add notes to each entry, and check reports weekly.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">My balance looks wrong, what can I do?</div>
                    <div class="chatbot-answer">Double-check for duplicate entries or incorrect transaction types (income vs expense).</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">Who created FlowLedger?</div>
                    <div class="chatbot-answer">FlowLedger is designed by TyPixel, focused on simple and smart personal finance tools.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">Who is the founder of FlowLedger?</div>
                    <div class="chatbot-answer">FlowLedger was founded and developed by Rifad, a designer and creator behind TyPixel.</div>
                    
                    <div class="chatbot-question" onclick="toggleAnswer(this)">How can I contact the FlowLedger team?</div>
                    <div class="chatbot-answer">You can reach Rifad, the founder of FlowLedger, by email at rifadwork@gmail.com or +918606218631 through WhatsApp Chat for quick support.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // User database with profile images
        const users = {
            '1050': { 
                name: 'MUHAMMAD SINAN PC', 
                password: '001050',
                image: 'https://z-cdn-media.chatglm.cn/files/7e0305ef-6819-4629-b515-8777b1eb9f91_1050.jpg?auth_key=1793237664-77a64e3cd53847f2bdf7f9ed738f6f85-0-a189166aafb66b1acedbee3ed5d2ee6a'
            },
            '1070': { 
                name: 'MUHAMMED MUSAMMIL B K', 
                password: '001070',
                image: 'https://z-cdn-media.chatglm.cn/files/f72d818c-5f56-4e3c-a1d3-d57ca2eea10d_1070.jpg?auth_key=1793237665-e24c742ee3c64d49a50828e11d41977e-0-41fd370ad6d2cd2aaccb60d42caf352f'
            },
            '1074': { 
                name: 'MUAD .M', 
                password: '001074',
                image: 'https://z-cdn-media.chatglm.cn/files/b5c97ff8-b322-4b3c-8f99-f4ce989ea190_1074.jpg?auth_key=1793237665-a9b031fc7eba4c7fa59aa2a7dd798f28-0-11bfa39955de46bc7feb296e9b027baf'
            },
            '1058': { 
                name: 'MUHAMMED JALAL AT', 
                password: '001058',
                image: 'https://z-cdn-media.chatglm.cn/files/e9d74094-8832-4529-ae53-7fee81c7d2cf_1058.jpg?auth_key=1793237665-18374d8e9479446a8ebed082c1cb1526-0-9f8011015ea2eb6f569177579e1786c4'
            },
            '1051': { 
                name: 'MUHAMMAD HISHAM T', 
                password: '001051',
                image: 'https://z-cdn-media.chatglm.cn/files/76c9fd55-5990-4c8c-aa79-fc3f6cd39574_1051.jpg?auth_key=1793237664-40913db37c894624ba289754d3d1e3b4-0-8ce764c013086b0ba2f1cf61fc1bcb86'
            },
            '1056': { 
                name: 'MUHAMMED SHADIN N.M.', 
                password: '001056',
                image: 'https://z-cdn-media.chatglm.cn/files/94eb6949-f39e-47a6-a4c5-6c4190382738_1056.jpg?auth_key=1793237665-17238b8e9b4f4165b4453206e9e9973b-0-86bd0d78ed07207fa91e01c20bf2830b'
            },
            '1076': { 
                name: 'MUHAMMED MINHAJ KK', 
                password: '001076',
                image: 'https://z-cdn-media.chatglm.cn/files/8005d8af-303b-4cb0-abf9-1d9b0f59cb77_1076.jpg?auth_key=1793237665-78eb855850b84ebe8bd66c4f6aa8d095-0-f540a852713afb379297e8c232279cf3'
            },
            '1071': { 
                name: 'SAYYID MOHAMMAD ZUHAIR A K', 
                password: '001071',
                image: 'https://z-cdn-media.chatglm.cn/files/65a4cd60-a9d9-403a-bfb6-909e6a3d1967_1071.jpg?auth_key=1793237665-a7f116ad58ac4bff8700e0d877958b4ce-0-0e2db1984030155e792fca7ebec43bf6'
            },
            '1075': { 
                name: 'MUHAMMED HASHIM P', 
                password: '001075',
                image: 'https://z-cdn-media.chatglm.cn/files/0cb46551-a033-478c-985d-6c17d66c6ae2_1075.jpg?auth_key=1793237665-f3a4fbd83b5f4a039c1cef34e82b853d-0-f76aded06384be8e5d06a308b939f56c'
            },
            '1061': { 
                name: 'ANSHID M P', 
                password: '001061',
                image: 'https://z-cdn-media.chatglm.cn/files/b8d273d3-ab88-4366-8ffb-81a26ef49291_1061.jpg?auth_key=1793237665-b4d4c60914ff47b490c647f706b7a474-0-d8c043d1b25edf28c28ccbe2ab3aca34'
            },
            '1072': { 
                name: 'MOHAMMED SINAN TP', 
                password: '001072',
                image: 'https://z-cdn-media.chatglm.cn/files/659ac722-919b-4796-bba5-c9cf9e7baf0f_1072.jpg?auth_key=1793237665-0b97beafd2274bc7b28f3c3d3a4e0857-0-5a274a48365b7ca8d7c76220ea8c9f3'
            },
            '1078': { 
                name: 'MUHAMMED RABIEUE MK', 
                password: '001078',
                image: 'https://z-cdn-media.chatglm.cn/files/52e8a112-928b-4c45-abd8-f9f0cb3a3c77_1078.jpg?auth_key=1793237665-36af5e95928244c9aac8966d82a174c1-0-fe7365eaaac7f8e6a7654b1946ea243c'
            },
            '1088': { 
                name: 'MOHAMMED NAEEM K', 
                password: '001088',
                image: 'https://z-cdn-media.chatglm.cn/files/ef65ba76-6ee6-4e58-86c8-d46fe51c01b3_1088.jpg?auth_key=1793237665-ad3f4e71812b4d58a619f03f65789b91-0-0370daf2330e66776b54cb519c0385e4'
            },
            '1082': { 
                name: 'MUHAMMED SANEEN', 
                password: '001082',
                image: 'https://z-cdn-media.chatglm.cn/files/aeb2b33f-65d7-4375-a717-5fd1edf59f25_1082.jpg?auth_key=1793237665-0e9fa5af7b3d4944b981e0913c3b6d89-0-ba55bb68fd58d942e65de72cdc0c0def'
            },
            '1090': { 
                name: 'MUHAMMED BASSAM', 
                password: '001090',
                image: 'https://z-cdn-media.chatglm.cn/files/cebeff30-89a5-484e-b981-f6dbbbb22fe6_1090.jpg?auth_key=1793237665-a44c0e20e4d04609970ce16db4d35acb-0-37abba856524ecea6f7983df95f9d82'
            },
            '1066': { 
                name: 'HASHIM MOHAMMED K P', 
                password: '001066',
                image: 'https://z-cdn-media.chatglm.cn/files/2b1a7bee-3522-4c25-88e9-6816598d2898_1066.jpg?auth_key=1793237665-71e635ac29894e3fac0f887c7da3c267-0-0fed3c21a28bf252c29b74eaf78d5ea8'
            },
            '1063': { 
                name: 'MOHAMMED RISHADH. T', 
                password: '001063',
                image: 'https://z-cdn-media.chatglm.cn/files/c82335be-a854-446b-85b0-7a04cd4fc2ec_1063.jpg?auth_key=1793237665-0f11036ca9eb4b1387c0034ec6d963aa-0-ceaa0df7e005669826d63ad3a8c0c23c'
            },
            '1073': { 
                name: 'MUHAMMAD MUSTHAFA KK', 
                password: '001073',
                image: 'https://z-cdn-media.chatglm.cn/files/c677473b-7263-41c7-b420-5cae6c96cc0a_1073.jpg?auth_key=1793237665-af7a354571b649bfbbdd896006df87e5-0-62553e62b7dcb94a7ba3833f04e15b39'
            },
            '1068': { 
                name: 'MUHAMMED UVAIS.EK', 
                password: '001068',
                image: 'https://z-cdn-media.chatglm.cn/files/7ca4a164-7e37-444b-aca9-1b89213dcf1d_1068.jpg?auth_key=1793237665-709c4a0140d5469d9966bae906d10032-0-83c0ef6dd897029495971b8f186841f0'
            },
            '1053': { 
                name: 'AMEEN T', 
                password: '001053',
                image: 'https://ui-avatars.com/api/?name=AMEEN%20T&background=random'
            },
            '1040': { 
                name: 'MUHAMMAD RIFAD K', 
                password: '001040',
                image: 'https://z-cdn-media.chatglm.cn/files/a2534a9f-1267-4d42-a505-bf789528c5db_1040.jpg?auth_key=1793237664-f6351a913fe24eaebc76e3356cbbcb3a-0-1829572bf1989375aa21f37caf3eb1b2'
            },
            '1059': { 
                name: 'AFSAL', 
                password: '001059',
                image: 'https://z-cdn-media.chatglm.cn/files/77775d01-a4b5-4e34-8d37-9c5bdcd373fb_1059.jpg?auth_key=1793237665-f70d767684c8484e9a295d2090e33ed2-0-82b1f74c59d744e979e31d6cdb433e15'
            },
            '1064': { 
                name: 'MOHAMED SHAMIL M', 
                password: '001064',
                image: 'https://z-cdn-media.chatglm.cn/files/3363b104-0d1f-4d16-bd91-27ff5821e23e_1064.jpg?auth_key=1793237665-471e14e1926f4bb0a155fb5a87c7863-0-8a72520b0d9e69f9ddf5a321893d006a'
            },
            '1013': { 
                name: 'MOHAMMED SAHAD.K', 
                password: '001013',
                image: 'https://z-cdn-media.chatglm.cn/files/3a8925a4-02c7-4da4-8bbc-4aea1aed6234_1013.jpg?auth_key=1793237664-4243a8d0cb974c1c9d8d327b589d6639-0-af8f4c18cd42e20afd28463e1d2ee840'
            },
            '1087': { 
                name: 'MUHAMMED SHAMIL. A', 
                password: '001087',
                image: 'https://z-cdn-media.chatglm.cn/files/ffa8408e-1e0f-4c5f-921f-8b89cdfa9e82_1087.jpg?auth_key=1793237665-03755786becb4d6a8592c0efaebab87d-0-54861e1ba89eb76b5ab8f957112ab447'
            },
            '1089': { 
                name: 'ADIL SHAH M', 
                password: '001089',
                image: 'https://z-cdn-media.chatglm.cn/files/a485d095-256c-4cbd-a787-e49f8da104ce_1089.jpg?auth_key=1793237665-6dd226799835457aa025a8577270a49-0-95a756a7800e8ff7cf94996e1ce229c9'
            },
            '1084': { 
                name: 'ASIM MOHAMED M', 
                password: '001084',
                image: 'https://z-cdn-media.chatglm.cn/files/18756586-7da3-4020-bd0d-73360f405a38_1084.jpg?auth_key=1793237665-d187256d571b4d7c9bae298b5a9dc57c-0-e569aedbb1ecd0481b29864ac3fbe8be'
            },
            '1024': { 
                name: 'FADHIL KATTIPARUTHI', 
                password: '001024',
                image: 'https://z-cdn-media.chatglm.cn/files/e94c87ca-7ff6-47d7-9baf-1b09e96e6c1b_1024.jpg?auth_key=1793237664-aa2d2973248f42138831470683a86d13-0-0c24a9ae88f99aded9e8c40936e6be63'
            },
            '1008': { 
                name: 'MUHAMMED MINHAJ', 
                password: '001008',
                image: 'https://z-cdn-media.chatglm.cn/files/ecbfd4cd-cc42-4f21-98fb-848f98473544_1008.jpg?auth_key=1793237664-b3365f25fa7a4d99a60cb9312798daeb-0-2651b0da3601fef244bbaccc73ab2647'
            },
            '1086': { 
                name: 'MOHAMMED NIDAL', 
                password: '001086',
                image: 'https://z-cdn-media.chatglm.cn/files/16bc4e43-4c5d-4338-b232-51db8f9eac40_1086.jpg?auth_key=1793237665-58238f1775624e47b8a3b0733bf3bd04-0-7ef4afb50b846d0baa21b6a74f87a7f4'
            },
            '1085': { 
                name: 'MUHAMMED NAFIH', 
                password: '001085',
                image: 'https://z-cdn-media.chatglm.cn/files/fa0dc7c3-faa0-4fb1-9957-926edebce265_1085.jpg?auth_key=1793237665-e2ed000d8de846e295d4d4a34c036d13-0-aed0e068458bd7188248d3fc569bb820'
            },
            '1014': { 
                name: 'MURSHID MK', 
                password: '001014',
                image: 'https://ui-avatars.com/api/?name=MURSHID%20MK&background=random'
            }
        };

        // Sample union transactions data
        const unionTransactions = [
            { id: 1, userId: '1050', userName: 'MUHAMMAD SINAN PC', type: 'income', amount: 2500, category: 'monthly', date: '2025-01-01', notes: 'Monthly salary' },
            { id: 2, userId: '1070', userName: 'MUHAMMED MUSAMMIL B K', type: 'income', amount: 2200, category: 'monthly', date: '2025-01-02', notes: 'Monthly salary' },
            { id: 3, userId: '1050', userName: 'MUHAMMAD SINAN PC', type: 'expense', amount: 300, category: 'Food', date: '2025-01-03', notes: 'food' },
            { id: 4, userId: '1074', userName: 'MUAD .M', type: 'income', amount: 2800, category: 'other', date: '2025-01-04', notes: 'other' },
            { id: 5, userId: '1058', userName: 'MUHAMMED JALAL AT', type: 'expense', amount: 150, category: 'Transport', date: '2025-01-05', notes: 'Bus fare' },
            { id: 6, userId: '1051', userName: 'MUHAMMAD HISHAM T', type: 'income', amount: 3000, category: 'monthly', date: '2025-01-06', notes: 'Monthly' },
            { id: 7, userId: '1056', userName: 'MUHAMMED SHADIN N.M.', type: 'expense', amount: 200, category: 'food', date: '2025-01-07', notes: 'food' },
            { id: 8, userId: '1076', userName: 'MUHAMMED MINHAJ KK', type: 'income', amount: 2600, category: 'monthly', date: '2025-01-08', notes: 'Monthly' },
            { id: 9, userId: '1071', userName: 'SAYYID MOHAMMAD ZUHAIR A K', type: 'expense', amount: 400, category: 'Housing', date: '2025-01-09', notes: 'Rent' },
            { id: 10, userId: '1075', userName: 'MUHAMMED HASHIM P', type: 'income', amount: 2400, category: 'other', date: '2025-01-10', notes: 'other' },
            { id: 11, userId: '1061', userName: 'ANSHID M P', type: 'expense', amount: 100, category: 'Healthcare', date: '2025-01-11', notes: 'Medicine' },
            { id: 12, userId: '1072', userName: 'MOHAMMED SINAN TP', type: 'income', amount: 2900, category: 'monthly', date: '2025-01-12', notes: 'Monthly' },
            { id: 13, userId: '1078', userName: 'MUHAMMED RABIEUE MK', type: 'expense', amount: 250, category: 'Food', date: '2025-01-13', notes: 'food' },
            { id: 14, userId: '1088', userName: 'MOHAMMED NAEEM K', type: 'income', amount: 2700, category: 'Monthly', date: '2025-01-14', notes: 'Monthly' },
            { id: 15, userId: '1082', userName: 'MUHAMMED SANEEN', type: 'expense', amount: 180, category: 'Transport', date: '2025-01-15', notes: 'bus fair' },
            { id: 16, userId: '1090', userName: 'MUHAMMED BASSAM', type: 'income', amount: 3100, category: 'Freelance', date: '2025-01-16', notes: 'Design project' },
            { id: 17, userId: '1066', userName: 'HASHIM MOHAMMED K P', type: 'expense', amount: 350, category: 'Entertainment', date: '2025-01-17', notes: 'Concert' },
            { id: 18, userId: '1063', userName: 'MOHAMMED RISHADH. T', type: 'income', amount: 2300, category: 'Salary', date: '2025-01-18', notes: 'Monthly salary' },
            { id: 19, userId: '1073', userName: 'MUHAMMAD MUSTHAFA KK', type: 'expense', amount: 120, category: 'Healthcare', date: '2025-01-19', notes: 'Doctor visit' },
            { id: 20, userId: '1068', userName: 'MUHAMMED UVAIS.EK', type: 'income', amount: 2800, category: 'Salary', date: '2025-01-20', notes: 'Monthly salary' }
        ];

        // Main tutorial steps
        const mainTutorialSteps = [
            {
                element: '.nav-link:nth-child(1)',
                title: 'Home',
                content: 'This is the Home page where you can get an overview of FlowLedge and access key features.'
            },
            {
                element: '.nav-link:nth-child(2)',
                title: 'Union Report',
                content: 'View the Union Financial Report to see overall income, expenses, and balance across all users.'
            },
            {
                element: '.nav-link:nth-child(3)',
                title: 'Dashboard',
                content: 'Your personal Dashboard shows your income, expenses, and current balance. Add transactions here.'
            },
            {
                element: '.nav-link:nth-child(4)',
                title: 'Reports',
                content: 'Generate detailed financial reports with charts and insights about your spending patterns.'
            },
            {
                element: '.settings-link',
                title: 'Settings',
                content: 'Customize your account preferences, currency, and manage your data in Settings.'
            },
            {
                element: '.nav-link:nth-child(6)',
                title: 'About',
                content: 'Learn more about FlowLedge, its features, and the team behind it in the About section.'
            }
        ];

        // Settings tutorial steps
        const settingsTutorialSteps = [
            {
                element: '.settings-link',
                title: 'Settings',
                content: 'Click here to access your account settings and preferences.'
            },
            {
                element: '#account',
                title: 'Account Settings',
                content: 'Here you can update your profile, change preferences, and manage your data.'
            },
            {
                element: '#profile-form',
                title: 'Profile Information',
                content: 'Update your personal information and password here.'
            },
            {
                element: '#currency',
                title: 'Currency Settings',
                content: 'Choose your preferred currency for financial transactions.'
            },
            {
                element: '#budget-limit',
                title: 'Budget Limit',
                content: 'Set your monthly budget limit to receive alerts when you exceed it.'
            }
        ];

        let currentMainTutorialStep = 0;
        let currentSettingsTutorialStep = 0;
        let mainTutorialInProgress = false;
        let settingsTutorialInProgress = false;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user has seen the main tutorial
            const hasSeenMainTutorial = localStorage.getItem('hasSeenMainTutorial');
            
            if (!hasSeenMainTutorial) {
                // Show main tutorial
                document.getElementById('main-tutorial-overlay').classList.add('active');
                mainTutorialInProgress = true;
                showMainTutorialStep();
            }
            
            // Set today's date as default
            document.getElementById('transaction-date').valueAsDate = new Date();
            
            // Initialize charts
            initializeCharts();
            
            // Check if user is logged in
            checkAuthStatus();
            
            // Load saved data
            loadTransactions();
            updateDashboard();
            
            // Load union report data
            loadUnionReport();
            
            // Add search and filter functionality for union report
            document.getElementById('union-search').addEventListener('input', filterUnionTransactions);
            document.getElementById('union-category-filter').addEventListener('change', filterUnionTransactions);
            
            // Add time range filter functionality
            document.getElementById('report-time-range').addEventListener('change', handleTimeRangeChange);
            
            // Add transaction search and sort functionality
            document.getElementById('transaction-search').addEventListener('input', filterTransactions);
            document.getElementById('transaction-sort').addEventListener('change', sortTransactions);
            
            // Set default report time range to this month
            document.getElementById('report-time-range').value = 'this-month';
            handleTimeRangeChange();
            
            // Load custom categories
            loadCustomCategories();
            
            // Check for first visit
            checkFirstVisit();
        });

        // Main tutorial functions
        function showMainTutorialStep() {
            const step = mainTutorialSteps[currentMainTutorialStep];
            const element = document.querySelector(step.element);
            
            if (!element) {
                nextMainTutorialStep();
                return;
            }
            
            const rect = element.getBoundingClientRect();
            const highlight = document.querySelector('#main-tutorial-overlay .tutorial-highlight');
            
            // Position and size the highlight
            highlight.style.width = `${rect.width + 20}px`;
            highlight.style.height = `${rect.height + 20}px`;
            highlight.style.left = `${rect.left - 10}px`;
            highlight.style.top = `${rect.top - 10}px`;
            
            // Update content
            document.querySelector('#main-tutorial-overlay .tutorial-title').textContent = step.title;
            document.querySelector('#main-tutorial-overlay .tutorial-description').textContent = step.content;
            
            // Update step indicators
            const dots = document.querySelectorAll('#main-tutorial-overlay .tutorial-step-dot');
            dots.forEach((dot, index) => {
                if (index === currentMainTutorialStep) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // Scroll element into view if needed
            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function nextMainTutorialStep() {
            if (currentMainTutorialStep < mainTutorialSteps.length - 1) {
                currentMainTutorialStep++;
                showMainTutorialStep();
            } else {
                finishMainTutorial();
            }
        }

        function skipMainTutorial() {
            finishMainTutorial();
        }

        function finishMainTutorial() {
            document.getElementById('main-tutorial-overlay').classList.remove('active');
            localStorage.setItem('hasSeenMainTutorial', 'true');
            mainTutorialInProgress = false;
        }

        // Settings tutorial functions
        function startSettingsTutorial() {
            if (!localStorage.getItem('settingsTutorialSeen')) {
                settingsTutorialInProgress = true;
                currentSettingsTutorialStep = 0;
                showSettingsTutorialStep();
                document.getElementById('tutorial-overlay').classList.add('active');
            } else {
                showPage('account');
            }
        }

        function showSettingsTutorialStep() {
            const step = settingsTutorialSteps[currentSettingsTutorialStep];
            const element = document.querySelector(step.element);
            
            if (!element) {
                nextSettingsTutorialStep();
                return;
            }
            
            const rect = element.getBoundingClientRect();
            const highlight = document.querySelector('#tutorial-overlay .tutorial-highlight');
            
            // Position and size the highlight
            highlight.style.width = `${rect.width + 20}px`;
            highlight.style.height = `${rect.height + 20}px`;
            highlight.style.left = `${rect.left - 10}px`;
            highlight.style.top = `${rect.top - 10}px`;
            
            // Update content
            document.querySelector('#tutorial-overlay .tutorial-title').textContent = step.title;
            document.querySelector('#tutorial-overlay .tutorial-description').textContent = step.content;
            
            // Update step indicators
            const dots = document.querySelectorAll('#tutorial-overlay .tutorial-step-dot');
            dots.forEach((dot, index) => {
                if (index === currentSettingsTutorialStep) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // Scroll element into view if needed
            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function nextSettingsTutorialStep() {
            if (currentSettingsTutorialStep < settingsTutorialSteps.length - 1) {
                currentSettingsTutorialStep++;
                showSettingsTutorialStep();
            } else {
                finishSettingsTutorial();
            }
        }

        function skipTutorial() {
            finishSettingsTutorial();
        }

        function finishSettingsTutorial() {
            document.getElementById('tutorial-overlay').classList.remove('active');
            localStorage.setItem('settingsTutorialSeen', 'true');
            settingsTutorialInProgress = false;
            
            // If we're on the last step and it's the settings page, make sure we're on the account page
            if (currentSettingsTutorialStep === settingsTutorialSteps.length - 1) {
                showPage('account');
            }
        }

        // Chatbot functions
        function toggleChatbot() {
            const chatbotWindow = document.getElementById('chatbot-window');
            chatbotWindow.classList.toggle('active');
        }

        function toggleAnswer(element) {
            const answer = element.nextElementSibling;
            answer.classList.toggle('active');
        }

        // Authentication functions
        function checkAuthStatus() {
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                updateAuthUI(true);
                loadUserProfile(currentUser);
            } else {
                updateAuthUI(false);
            }
        }

        function updateAuthUI(isLoggedIn) {
            const authButtons = document.getElementById('auth-buttons');
            
            if (isLoggedIn) {
                const currentUser = localStorage.getItem('currentUser');
                const userName = users[currentUser] ? users[currentUser].name : 'User';
                const userImage = users[currentUser] ? users[currentUser].image : '';
                
                authButtons.innerHTML = `
                    <div class="profile-dropdown">
                        <button onclick="toggleProfileDropdown()" class="flex items-center space-x-2 focus:outline-none">
                            <img src="${userImage}" alt="${userName}" class="profile-image">
                            <span class="hidden md:inline">${userName}</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div id="profile-dropdown-menu" class="profile-dropdown-menu">
                            <a href="#" onclick="showPage('account')" class="profile-dropdown-item">
                                <i class="fas fa-user mr-2"></i> Profile
                            </a>
                            <a href="#" onclick="showPage('settings')" class="profile-dropdown-item">
                                <i class="fas fa-cog mr-2"></i> Settings
                            </a>
                            <a href="#" onclick="logout()" class="profile-dropdown-item">
                                <i class="fas fa-sign-out-alt mr-2"></i> Logout
                            </a>
                        </div>
                    </div>
                `;
            } else {
                authButtons.innerHTML = `
                    <button onclick="showLoginModal()" class="bg-white text-teal-600 px-4 py-2 rounded-lg font-medium hover:bg-teal-100 transition">
                        <i class="fas fa-sign-in-alt mr-2"></i>Login
                    </button>
                `;
            }
        }

        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profile-dropdown-menu');
            dropdown.classList.toggle('active');
        }

        function loadUserProfile(userId) {
            if (users[userId]) {
                document.getElementById('profile-admission').value = userId;
                document.getElementById('profile-name').value = users[userId].name;
                
                // Update welcome message on dashboard with profile image
                const welcomeElement = document.getElementById('user-welcome');
                if (welcomeElement) {
                    welcomeElement.innerHTML = `
                        <img src="${users[userId].image}" alt="${users[userId].name}" class="profile-image">
                        <span>Welcome, ${users[userId].name}</span>
                    `;
                }
                
                // Update account page profile
                document.getElementById('account-profile-image').src = users[userId].image;
                document.getElementById('account-profile-name').textContent = users[userId].name;
                document.getElementById('account-profile-id').textContent = `Admission No: ${userId}`;
            }
        }

        function logout() {
            localStorage.removeItem('currentUser');
            updateAuthUI(false);
            showPage('home');
            showNotification('You have been logged out successfully', 'info');
        }

        function showLoginModal() {
            document.getElementById('login-modal').classList.add('active');
        }

        function closeLoginModal() {
            document.getElementById('login-modal').classList.remove('active');
        }

        // Page navigation
        function showPage(pageId) {
            // Check if user is logged in for protected pages
            const protectedPages = ['dashboard', 'reports', 'account'];
            if (protectedPages.includes(pageId) && !localStorage.getItem('currentUser')) {
                showNotification('Please login to access this page', 'warning');
                showLoginModal();
                return;
            }
            
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update active nav button
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => btn.classList.remove('text-teal-200'));
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Transaction management
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
        let recurringTransactions = JSON.parse(localStorage.getItem('recurringTransactions')) || [];
        let customCategories = JSON.parse(localStorage.getItem('customCategories')) || [];

        document.getElementById('transaction-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const type = document.getElementById('transaction-type').value;
            const amount = parseFloat(document.getElementById('transaction-amount').value);
            const category = document.getElementById('transaction-category').value;
            const date = document.getElementById('transaction-date').value;
            const notes = document.getElementById('transaction-notes').value;
            
            const transaction = {
                id: Date.now(),
                type,
                amount,
                category,
                date,
                notes
            };
            
            transactions.push(transaction);
            saveTransactions();
            updateDashboard();
            updateTransactionsList();
            
            // Reset form
            this.reset();
            document.getElementById('transaction-date').valueAsDate = new Date();
            
            // Show success message
            showNotification('Transaction added successfully!', 'success');
            
            // Hide welcome banner if it's visible
            closeWelcomeBanner();
        });

        function saveTransactions() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        function loadTransactions() {
            updateTransactionsList();
        }

        function updateTransactionsList() {
            const tbody = document.getElementById('transactions-list');
            const cardsContainer = document.getElementById('transactions-cards');
            
            if (transactions.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center py-8">
                            <div class="empty-state">
                                <i class="fas fa-receipt empty-state-icon"></i>
                                <p class="text-gray-500 mb-4">No transactions yet. Add your first transaction!</p>
                                <button onclick="document.getElementById('transaction-form').scrollIntoView()" class="bg-teal-600 text-white px-4 py-2 rounded-lg">
                                    Add Transaction
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
                cardsContainer.innerHTML = '';
                return;
            }
            
            // Sort transactions by date descending (newest first)
            const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Update table - only show recent transactions (last 10)
            tbody.innerHTML = sortedTransactions.slice(0, 10).map(transaction => `
                <tr class="transaction-row border-b">
                    <td class="py-3">${formatDate(transaction.date)}</td>
                    <td class="py-3">${transaction.notes || transaction.category}</td>
                    <td class="py-3 hidden sm:table-cell">
                        <span class="px-2 py-1 rounded-full text-xs ${getCategoryColor(transaction.category)}">
                            ${transaction.category}
                        </span>
                    </td>
                    <td class="py-3 font-semibold ${transaction.type === 'income' ? 'text-green-600' : 'text-red-600'}">
                        ${transaction.type === 'income' ? '+' : '-'}${formatCurrency(transaction.amount)}
                    </td>
                    <td class="py-3">
                        <div class="tooltip">
                            <button onclick="deleteTransaction(${transaction.id})" class="text-red-600 hover:text-red-800 transition">
                                <i class="fas fa-trash"></i>
                            </button>
                            <span class="tooltiptext">Delete</span>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            // Update cards for mobile
            cardsContainer.innerHTML = sortedTransactions.slice(0, 10).map(transaction => `
                <div class="transaction-card">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-semibold">${transaction.notes || transaction.category}</span>
                        <span class="font-semibold ${transaction.type === 'income' ? 'text-green-600' : 'text-red-600'}">
                            ${transaction.type === 'income' ? '+' : '-'}${formatCurrency(transaction.amount)}
                        </span>
                    </div>
                    <div class="flex justify-between items-center text-sm text-gray-600">
                        <span>${formatDate(transaction.date)}</span>
                        <span class="px-2 py-1 rounded-full text-xs ${getCategoryColor(transaction.category)}">
                            ${transaction.category}
                        </span>
                    </div>
                    <div class="mt-2 flex justify-end">
                        <button onclick="deleteTransaction(${transaction.id})" class="text-red-600 hover:text-red-800 transition">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function deleteTransaction(id) {
            transactions = transactions.filter(t => t.id !== id);
            saveTransactions();
            updateDashboard();
            updateTransactionsList();
            showNotification('Transaction deleted', 'info');
        }

        function clearTransactions() {
            if (confirm('Are you sure you want to delete all transactions? This action cannot be undone.')) {
                transactions = [];
                saveTransactions();
                updateDashboard();
                updateTransactionsList();
                showNotification('All transactions cleared', 'info');
            }
        }

        function updateDashboard() {
            // Calculate totals
            const income = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const expenses = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const balance = income - expenses;
            
            // Update UI with formatted currency
            document.getElementById('total-income').textContent = formatCurrency(income, true);
            document.getElementById('total-expenses').textContent = formatCurrency(expenses, true);
            document.getElementById('current-balance').textContent = formatCurrency(balance, true);
            
            // Update charts
            updateExpenseChart();
            updateMonthlyChart();
            
            // Check budget alerts
            checkBudgetAlerts(expenses);
        }

        function updateExpenseChart() {
            const ctx = document.getElementById('expense-chart').getContext('2d');
            
            // Get expense data by category
            const expensesByCategory = {};
            transactions
                .filter(t => t.type === 'expense')
                .forEach(t => {
                    expensesByCategory[t.category] = (expensesByCategory[t.category] || 0) + t.amount;
                });
            
            const labels = Object.keys(expensesByCategory);
            const data = Object.values(expensesByCategory);
            
            // Destroy previous chart if exists
            if (window.expenseChart) {
                window.expenseChart.destroy();
            }
            
            window.expenseChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            '#FF6384',
                            '#36A2EB',
                            '#FFCE56',
                            '#4BC0C0',
                            '#9966FF',
                            '#FF9F40',
                            '#8AC926',
                            '#1982C4'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        function updateMonthlyChart() {
            const ctx = document.getElementById('monthly-chart').getContext('2d');
            
            // Group transactions by month
            const monthlyData = {};
            transactions.forEach(t => {
                const month = t.date.substring(0, 7); // YYYY-MM
                if (!monthlyData[month]) {
                    monthlyData[month] = { income: 0, expense: 0 };
                }
                monthlyData[month][t.type] += t.amount;
            });
            
            const sortedMonths = Object.keys(monthlyData).sort();
            const incomeData = sortedMonths.map(m => monthlyData[m].income);
            const expenseData = sortedMonths.map(m => monthlyData[m].expense);
            
            // Destroy previous chart if exists
            if (window.monthlyChart) {
                window.monthlyChart.destroy();
            }
            
            window.monthlyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: sortedMonths,
                    datasets: [
                        {
                            label: 'Income',
                            data: incomeData,
                            backgroundColor: '#4CAF50'
                        },
                        {
                            label: 'Expenses',
                            data: expenseData,
                            backgroundColor: '#F44336'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + formatCurrency(context.raw);
                                }
                            }
                        }
                    }
                }
            });
        }

        function checkBudgetAlerts(expenses) {
            const budgetLimit = parseFloat(localStorage.getItem('budgetLimit')) || 0;
            const alertsEnabled = localStorage.getItem('budgetAlerts') === 'true';
            
            if (alertsEnabled && budgetLimit > 0 && expenses > budgetLimit) {
                document.getElementById('budget-alert').classList.remove('hidden');
            } else {
                document.getElementById('budget-alert').classList.add('hidden');
            }
        }

        function closeBudgetAlert() {
            document.getElementById('budget-alert').classList.add('hidden');
        }

        // Recurring transactions
        function addRecurringTransaction() {
            const type = document.getElementById('transaction-type').value;
            const amount = parseFloat(document.getElementById('transaction-amount').value);
            const category = document.getElementById('transaction-category').value;
            const date = document.getElementById('transaction-date').value;
            const notes = document.getElementById('transaction-notes').value;
            const frequency = document.getElementById('recurring-frequency').value;
            const endDate = document.getElementById('recurring-end-date').value;
            
            if (!amount || !date) {
                showNotification('Please fill in amount and date', 'error');
                return;
            }
            
            const recurringTransaction = {
                id: Date.now(),
                type,
                amount,
                category,
                startDate: date,
                notes,
                frequency,
                endDate: endDate || null
            };
            
            recurringTransactions.push(recurringTransaction);
            localStorage.setItem('recurringTransactions', JSON.stringify(recurringTransactions));
            
            showNotification('Recurring transaction set up successfully!', 'success');
            
            // Reset recurring form
            document.getElementById('recurring-frequency').value = 'monthly';
            document.getElementById('recurring-end-date').value = '';
        }

        function processRecurringTransactions() {
            const today = new Date().toISOString().split('T')[0];
            
            recurringTransactions.forEach(recurring => {
                if (recurring.endDate && today > recurring.endDate) {
                    return; // Skip if end date has passed
                }
                
                let nextDate = new Date(recurring.startDate);
                let processed = false;
                
                while (nextDate <= new Date(today)) {
                    const dateStr = nextDate.toISOString().split('T')[0];
                    
                    // Check if transaction for this date already exists
                    const exists = transactions.some(t => 
                        t.date === dateStr && 
                        t.amount === recurring.amount && 
                        t.category === recurring.category &&
                        t.type === recurring.type
                    );
                    
                    if (!exists) {
                        transactions.push({
                            id: Date.now() + Math.random(),
                            type: recurring.type,
                            amount: recurring.amount,
                            category: recurring.category,
                            date: dateStr,
                            notes: recurring.notes + ' (Recurring)'
                        });
                        processed = true;
                    }
                    
                    // Calculate next date based on frequency
                    if (recurring.frequency === 'weekly') {
                        nextDate.setDate(nextDate.getDate() + 7);
                    } else if (recurring.frequency === 'monthly') {
                        nextDate.setMonth(nextDate.getMonth() + 1);
                    } else if (recurring.frequency === 'yearly') {
                        nextDate.setFullYear(nextDate.getFullYear() + 1);
                    }
                }
                
                if (processed) {
                    saveTransactions();
                    updateDashboard();
                    updateTransactionsList();
                }
            });
        }

        // Custom categories
        function addCustomCategory() {
            const newCategory = document.getElementById('new-category').value.trim();
            
            if (!newCategory) {
                showNotification('Please enter a category name', 'error');
                return;
            }
            
            if (customCategories.includes(newCategory)) {
                showNotification('Category already exists', 'warning');
                return;
            }
            
            customCategories.push(newCategory);
            localStorage.setItem('customCategories', JSON.stringify(customCategories));
            
            // Update category dropdowns
            updateCategoryDropdowns();
            
            // Clear input
            document.getElementById('new-category').value = '';
            
            showNotification('Category added successfully!', 'success');
        }

        function loadCustomCategories() {
            updateCategoryDropdowns();
            updateCustomCategoriesList();
        }

        function updateCategoryDropdowns() {
            const dropdowns = [
                document.getElementById('transaction-category'),
                document.getElementById('report-category')
            ];
            
            dropdowns.forEach(dropdown => {
                if (!dropdown) return;
                
                // Save current selection
                const currentValue = dropdown.value;
                
                // Clear existing options except the first one
                while (dropdown.children.length > 1) {
                    dropdown.removeChild(dropdown.lastChild);
                }
                
                // Add custom categories
                customCategories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    dropdown.appendChild(option);
                });
                
                // Restore selection if it still exists
                if (Array.from(dropdown.options).some(option => option.value === currentValue)) {
                    dropdown.value = currentValue;
                }
            });
        }

        function updateCustomCategoriesList() {
            const container = document.getElementById('custom-categories-list');
            
            if (customCategories.length === 0) {
                container.innerHTML = '<p class="text-gray-500">No custom categories yet</p>';
                return;
            }
            
            container.innerHTML = customCategories.map(category => `
                <div class="bg-gray-100 px-3 py-1 rounded-full flex items-center">
                    <span>${category}</span>
                    <button onclick="removeCustomCategory('${category}')" class="ml-2 text-red-500 hover:text-red-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `).join('');
        }

        function removeCustomCategory(category) {
            customCategories = customCategories.filter(c => c !== category);
            localStorage.setItem('customCategories', JSON.stringify(customCategories));
            
            updateCategoryDropdowns();
            updateCustomCategoriesList();
            
            showNotification('Category removed', 'info');
        }

        // Union Report Functions
        function loadUnionReport() {
            // Calculate union totals
            const income = unionTransactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const expenses = unionTransactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const balance = income - expenses;
            
            // Update home page overview
            document.getElementById('union-income').textContent = formatCurrency(income, true);
            document.getElementById('union-expenses').textContent = formatCurrency(expenses, true);
            document.getElementById('union-balance').textContent = formatCurrency(balance, true);
            
            // Update union report page
            document.getElementById('union-report-income').textContent = formatCurrency(income, true);
            document.getElementById('union-report-expenses').textContent = formatCurrency(expenses, true);
            document.getElementById('union-report-balance').textContent = formatCurrency(balance, true);
            
            // Generate insights
            generateUnionInsights(unionTransactions, income, expenses);
            
            // Update transactions table
            updateUnionTransactionsList(unionTransactions);
        }

        function generateUnionInsights(transactions, income, expenses) {
            const insights = [];
            
            // Highest spending category
            const expensesByCategory = {};
            transactions
                .filter(t => t.type === 'expense')
                .forEach(t => {
                    expensesByCategory[t.category] = (expensesByCategory[t.category] || 0) + t.amount;
                });
            
            const highestCategory = Object.entries(expensesByCategory)
                .sort((a, b) => b[1] - a[1])[0];
            
            if (highestCategory) {
                const percentage = Math.round((highestCategory[1] / expenses) * 100);
                insights.push({
                    icon: 'fa-chart-pie',
                    text: `The highest spending category is <strong>${highestCategory[0]}</strong> at ${formatCurrency(highestCategory[1])}`,
                    percentage: percentage
                });
            }
            
            // Average transaction
            const expenseTransactions = transactions.filter(t => t.type === 'expense');
            if (expenseTransactions.length > 0) {
                const avgExpense = expenses / expenseTransactions.length;
                insights.push({
                    icon: 'fa-calculator',
                    text: `Average expense: <strong>${formatCurrency(avgExpense)}</strong>`,
                    percentage: null
                });
            }
            
            // Savings rate
            if (income > 0) {
                const savingsRate = ((income - expenses) / income * 100).toFixed(1);
                insights.push({
                    icon: 'fa-piggy-bank',
                    text: `Union savings rate: <strong>${savingsRate}%</strong>`,
                    percentage: savingsRate
                });
            }
            
            // Number of users
            const uniqueUsers = new Set(transactions.map(t => t.userId)).size;
            insights.push({
                icon: 'fa-users',
                text: `Total users: <strong>${uniqueUsers}</strong>`,
                percentage: null
            });
            
            // Update UI
            const container = document.getElementById('union-insights-container');
            if (insights.length > 0) {
                container.innerHTML = insights.map(insight => `
                    <div class="insight-card flex items-center p-4 bg-gray-50 rounded-lg">
                        <div class="mr-4 bg-teal-100 p-3 rounded-full">
                            <i class="fas ${insight.icon} text-teal-600"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-gray-700">${insight.text}</p>
                            ${insight.percentage !== null ? `
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${insight.percentage}%"></div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `).join('');
            } else {
                container.innerHTML = '<p class="text-gray-600">No insights available</p>';
            }
        }

        function updateUnionTransactionsList(transactionList) {
            const tbody = document.getElementById('union-transactions-list');
            
            if (transactionList.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="text-center py-8 text-gray-500">No transactions found</td></tr>';
                return;
            }
            
            // Sort transactions by date descending (most recent first)
            const sortedTransactions = [...transactionList].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            tbody.innerHTML = sortedTransactions.map(transaction => `
                <tr class="transaction-row border-b">
                    <td class="py-3">${formatDate(transaction.date)}</td>
                    <td class="py-3">
                        <div class="flex items-center space-x-2">
                            ${users[transaction.userId] ? 
                                `<img src="${users[transaction.userId].image}" alt="${transaction.userName}" class="profile-image">` : 
                                `<div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs text-gray-600">
                                    ${transaction.userName.charAt(0)}
                                </div>`
                            }
                            <span>${transaction.userName}</span>
                        </div>
                    </td>
                    <td class="py-3">${transaction.notes || transaction.category}</td>
                    <td class="py-3">
                        <span class="px-2 py-1 rounded-full text-xs ${getCategoryColor(transaction.category)}">
                            ${transaction.category}
                        </span>
                    </td>
                    <td class="py-3">
                        <span class="px-2 py-1 rounded-full text-xs ${transaction.type === 'income' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                            ${transaction.type}
                        </span>
                    </td>
                    <td class="py-3 font-semibold ${transaction.type === 'income' ? 'text-green-600' : 'text-red-600'}">
                        ${transaction.type === 'income' ? '+' : '-'}${formatCurrency(transaction.amount)}
                    </td>
                </tr>
            `).join('');
        }

        function filterUnionTransactions() {
            const searchTerm = document.getElementById('union-search').value.toLowerCase();
            const categoryFilter = document.getElementById('union-category-filter').value;
            
            let filtered = unionTransactions;
            
            if (searchTerm) {
                filtered = filtered.filter(t => 
                    t.userName.toLowerCase().includes(searchTerm) ||
                    (t.notes && t.notes.toLowerCase().includes(searchTerm)) ||
                    t.category.toLowerCase().includes(searchTerm)
                );
            }
            
            if (categoryFilter !== 'all') {
                filtered = filtered.filter(t => t.category === categoryFilter);
            }
            
            // Sort filtered transactions by date descending (most recent first)
            const sortedFiltered = [...filtered].sort((a, b) => new Date(b.date) - new Date(a.date));
            updateUnionTransactionsList(sortedFiltered);
        }

        function exportUnionToCSV() {
            showLoadingSpinner();
            
            setTimeout(() => {
                let csv = 'Date,User,Description,Category,Type,Amount\n';
                
                // Sort transactions by date descending (most recent first)
                const sortedTransactions = [...unionTransactions].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                sortedTransactions.forEach(t => {
                    csv += `${t.date},${t.userName},"${t.notes || t.category}",${t.category},${t.type},${t.amount}\n`;
                });
                
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'flowledge-union-report.csv';
                a.click();
                
                hideLoadingSpinner();
                showNotification('Union report CSV exported successfully!', 'success');
            }, 1000);
        }

        function exportUnionToPDF() {
            showLoadingSpinner();
            
            setTimeout(() => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Add title
                doc.setFontSize(20);
                doc.text('FlowLedge Union Financial Report', 105, 15, { align: 'center' });
                
                // Add date
                doc.setFontSize(12);
                doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 105, 25, { align: 'center' });
                
                // Calculate totals
                const income = unionTransactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);
                    
                const expenses = unionTransactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
                    
                const balance = income - expenses;
                
                // Add summary
                doc.setFontSize(14);
                doc.text('Union Financial Summary', 20, 50);
                doc.setFontSize(12);
                doc.text(`Total Income: ${formatCurrency(income)}`, 20, 60);
                doc.text(`Total Expenses: ${formatCurrency(expenses)}`, 20, 70);
                doc.text(`Net Balance: ${formatCurrency(balance)}`, 20, 80);
                
                // Add transactions table
                // Sort transactions by date descending (most recent first)
                const sortedTransactions = [...unionTransactions].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                const tableData = sortedTransactions.map(t => [
                    formatDate(t.date),
                    t.userName,
                    t.category,
                    t.type,
                    formatCurrency(t.amount),
                    t.notes || ''
                ]);
                
                doc.autoTable({
                    head: [['Date', 'User', 'Category', 'Type', 'Amount', 'Notes']],
                    body: tableData,
                    startY: 90,
                    theme: 'grid'
                });
                
                // Save the PDF
                doc.save('flowledge-union-report.pdf');
                
                hideLoadingSpinner();
                showNotification('Union report PDF exported successfully!', 'success');
            }, 1500);
        }

        // Reports functionality
        function handleTimeRangeChange() {
            const timeRange = document.getElementById('report-time-range').value;
            const fromInput = document.getElementById('report-from');
            const toInput = document.getElementById('report-to');
            
            const today = new Date();
            const thisMonth = today.getMonth();
            const thisYear = today.getFullYear();
            
            fromInput.value = '';
            toInput.value = '';
            
            switch(timeRange) {
                case 'this-month':
                    fromInput.value = `${thisYear}-${String(thisMonth + 1).padStart(2, '0')}-01`;
                    toInput.value = new Date(thisYear, thisMonth + 1, 0).toISOString().split('T')[0];
                    break;
                case 'last-month':
                    const lastMonth = thisMonth === 0 ? 11 : thisMonth - 1;
                    const lastMonthYear = thisMonth === 0 ? thisYear - 1 : thisYear;
                    fromInput.value = `${lastMonthYear}-${String(lastMonth + 1).padStart(2, '0')}-01`;
                    toInput.value = new Date(lastMonthYear, lastMonth + 1, 0).toISOString().split('T')[0];
                    break;
                case 'this-year':
                    fromInput.value = `${thisYear}-01-01`;
                    toInput.value = `${thisYear}-12-31`;
                    break;
            }
        }

        function generateReport() {
            const fromDate = document.getElementById('report-from').value;
            const toDate = document.getElementById('report-to').value;
            const category = document.getElementById('report-category').value;
            
            // Filter transactions
            let filtered = transactions;
            
            if (fromDate) {
                filtered = filtered.filter(t => t.date >= fromDate);
            }
            
            if (toDate) {
                filtered = filtered.filter(t => t.date <= toDate);
            }
            
            if (category !== 'all') {
                filtered = filtered.filter(t => t.category === category);
            }
            
            // Calculate totals
            const income = filtered
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const expenses = filtered
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const balance = income - expenses;
            
            // Update UI
            document.getElementById('report-income').textContent = formatCurrency(income, true);
            document.getElementById('report-expenses').textContent = formatCurrency(expenses, true);
            document.getElementById('report-balance').textContent = formatCurrency(balance, true);
            
            // Generate insights
            generateInsights(filtered, income, expenses);
            
            showNotification('Report generated successfully!', 'success');
        }

        function generateInsights(transactions, income, expenses) {
            const insights = [];
            
            // Highest spending category
            const expensesByCategory = {};
            transactions
                .filter(t => t.type === 'expense')
                .forEach(t => {
                    expensesByCategory[t.category] = (expensesByCategory[t.category] || 0) + t.amount;
                });
            
            const highestCategory = Object.entries(expensesByCategory)
                .sort((a, b) => b[1] - a[1])[0];
            
            if (highestCategory) {
                const percentage = Math.round((highestCategory[1] / expenses) * 100);
                insights.push({
                    icon: 'fa-chart-pie',
                    text: `Your highest spending category is <strong>${highestCategory[0]}</strong> at ${formatCurrency(highestCategory[1])}`,
                    percentage: percentage
                });
            }
            
            // Average transaction
            const expenseTransactions = transactions.filter(t => t.type === 'expense');
            if (expenseTransactions.length > 0) {
                const avgExpense = expenses / expenseTransactions.length;
                insights.push({
                    icon: 'fa-calculator',
                    text: `Average expense: <strong>${formatCurrency(avgExpense)}</strong>`,
                    percentage: null
                });
            }
            
            // Savings rate
            if (income > 0) {
                const savingsRate = ((income - expenses) / income * 100).toFixed(1);
                insights.push({
                    icon: 'fa-piggy-bank',
                    text: `Your savings rate is <strong>${savingsRate}%</strong>`,
                    percentage: savingsRate
                });
            }
            
            // Update UI
            const container = document.getElementById('insights-container');
            if (insights.length > 0) {
                container.innerHTML = insights.map(insight => `
                    <div class="insight-card flex items-center p-4 bg-gray-50 rounded-lg">
                        <div class="mr-4 bg-teal-100 p-3 rounded-full">
                            <i class="fas ${insight.icon} text-teal-600"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-gray-700">${insight.text}</p>
                            ${insight.percentage !== null ? `
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${insight.percentage}%"></div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `).join('');
            } else {
                container.innerHTML = '<p class="text-gray-600">No insights available for the selected filters</p>';
            }
        }

        function exportToCSV() {
            showLoadingSpinner();
            
            setTimeout(() => {
                let csv = 'Date,Type,Category,Amount,Notes\n';
                
                // Sort transactions by date descending (most recent first)
                const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                sortedTransactions.forEach(t => {
                    csv += `${t.date},${t.type},${t.category},${t.amount},"${t.notes || ''}"\n`;
                });
                
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'flowledge-transactions.csv';
                a.click();
                
                hideLoadingSpinner();
                showNotification('CSV exported successfully!', 'success');
            }, 1000);
        }

        function exportToPDF() {
            showLoadingSpinner();
            
            setTimeout(() => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Add title
                doc.setFontSize(20);
                doc.text('FlowLedge Financial Report', 105, 15, { align: 'center' });
                
                // Add date
                doc.setFontSize(12);
                doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 105, 25, { align: 'center' });
                
                // Add user info
                const currentUser = localStorage.getItem('currentUser');
                if (currentUser && users[currentUser]) {
                    doc.text(`User: ${users[currentUser].name} (${currentUser})`, 105, 35, { align: 'center' });
                }
                
                // Add summary
                const income = transactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);
                    
                const expenses = transactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
                    
                const balance = income - expenses;
                
                doc.setFontSize(14);
                doc.text('Financial Summary', 20, 50);
                doc.setFontSize(12);
                doc.text(`Total Income: ${formatCurrency(income)}`, 20, 60);
                doc.text(`Total Expenses: ${formatCurrency(expenses)}`, 20, 70);
                doc.text(`Net Balance: ${formatCurrency(balance)}`, 20, 80);
                
                // Add transactions table
                // Sort transactions by date descending (most recent first)
                const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                const tableData = sortedTransactions.map(t => [
                    formatDate(t.date),
                    t.type,
                    t.category,
                    formatCurrency(t.amount),
                    t.notes || ''
                ]);
                
                doc.autoTable({
                    head: [['Date', 'Type', 'Category', 'Amount', 'Notes']],
                    body: tableData,
                    startY: 90,
                    theme: 'grid'
                });
                
                // Save the PDF
                doc.save('flowledge-report.pdf');
                
                hideLoadingSpinner();
                showNotification('PDF exported successfully!', 'success');
            }, 1500);
        }

        // Account management
        document.getElementById('profile-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('profile-name').value;
            const email = document.getElementById('profile-email').value;
            const password = document.getElementById('profile-password').value;
            
            // Save to localStorage (in a real app, this would be sent to a server)
            localStorage.setItem('userName', name);
            localStorage.setItem('userEmail', email);
            
            showNotification('Profile updated successfully!', 'success');
        });

        document.getElementById('currency').addEventListener('change', function() {
            localStorage.setItem('currency', this.value);
            updateDashboard(); // Refresh to show new currency format
            showNotification('Currency updated!', 'success');
        });

        document.getElementById('date-format').addEventListener('change', function() {
            localStorage.setItem('dateFormat', this.value);
            updateTransactionsList(); // Refresh to show new date format
            showNotification('Date format updated!', 'success');
        });

        document.getElementById('budget-alerts').addEventListener('change', function() {
            localStorage.setItem('budgetAlerts', this.checked);
            if (this.checked) {
                const expenses = transactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
                checkBudgetAlerts(expenses);
            }
        });

        document.getElementById('budget-limit').addEventListener('change', function() {
            localStorage.setItem('budgetLimit', this.value);
            const expenses = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            checkBudgetAlerts(expenses);
        });

        // Data management
        function exportData() {
            const data = {
                transactions,
                recurringTransactions,
                customCategories,
                settings: {
                    currency: localStorage.getItem('currency') || 'INR',
                    budgetAlerts: localStorage.getItem('budgetAlerts') === 'true',
                    budgetLimit: localStorage.getItem('budgetLimit') || 0,
                    dateFormat: localStorage.getItem('dateFormat') || 'DD/MM/YYYY'
                },
                profile: {
                    name: localStorage.getItem('userName') || '',
                    email: localStorage.getItem('userEmail') || ''
                }
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'flowledge-backup.json';
            a.click();
            
            showNotification('Data exported successfully!', 'success');
        }

        document.getElementById('import-file').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Validate data
                    if (data.transactions && Array.isArray(data.transactions)) {
                        // Show confirmation dialog
                        if (confirm('Importing data will replace all existing transactions. Continue?')) {
                            transactions = data.transactions;
                            saveTransactions();
                            updateDashboard();
                            updateTransactionsList();
                            
                            // Restore settings
                            if (data.settings) {
                                if (data.settings.currency) localStorage.setItem('currency', data.settings.currency);
                                if (data.settings.budgetAlerts !== undefined) localStorage.setItem('budgetAlerts', data.settings.budgetAlerts);
                                if (data.settings.budgetLimit !== undefined) localStorage.setItem('budgetLimit', data.settings.budgetLimit);
                                if (data.settings.dateFormat !== undefined) localStorage.setItem('dateFormat', data.settings.dateFormat);
                                
                                // Update UI elements
                                document.getElementById('currency').value = data.settings.currency || 'INR';
                                document.getElementById('budget-alerts').checked = data.settings.budgetAlerts || false;
                                document.getElementById('budget-limit').value = data.settings.budgetLimit || 0;
                                document.getElementById('date-format').value = data.settings.dateFormat || 'DD/MM/YYYY';
                            }
                            
                            // Restore recurring transactions
                            if (data.recurringTransactions && Array.isArray(data.recurringTransactions)) {
                                recurringTransactions = data.recurringTransactions;
                                localStorage.setItem('recurringTransactions', JSON.stringify(recurringTransactions));
                            }
                            
                            // Restore custom categories
                            if (data.customCategories && Array.isArray(data.customCategories)) {
                                customCategories = data.customCategories;
                                localStorage.setItem('customCategories', JSON.stringify(customCategories));
                                updateCategoryDropdowns();
                                updateCustomCategoriesList();
                            }
                            
                            // Restore profile
                            if (data.profile) {
                                if (data.profile.name) localStorage.setItem('userName', data.profile.name);
                                if (data.profile.email) localStorage.setItem('userEmail', data.profile.email);
                                
                                document.getElementById('profile-name').value = data.profile.name || '';
                                document.getElementById('profile-email').value = data.profile.email || '';
                            }
                            
                            showNotification('Data imported successfully!', 'success');
                        }
                    } else {
                        showNotification('Invalid data format', 'error');
                    }
                } catch (error) {
                    showNotification('Error importing data: ' + error.message, 'error');
                }
            };
            reader.readAsText(file);
        });

        // Login functionality
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            // Check if user exists and password matches
            if (users[username] && users[username].password === password) {
                // Set current user
                localStorage.setItem('currentUser', username);
                
                // Update UI
                updateAuthUI(true);
                loadUserProfile(username);
                
                // Close modal
                closeLoginModal();
                
                // Show success message
                showNotification('Login successful! Welcome back.', 'success');
                
                // Redirect to dashboard
                setTimeout(() => showPage('dashboard'), 1000);
                
                // Process recurring transactions
                processRecurringTransactions();
            } else {
                showNotification('Invalid username or password', 'error');
            }
        });

        // Utility functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            const dateFormat = localStorage.getItem('dateFormat') || 'DD/MM/YYYY';
            
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            
            if (dateFormat === 'MM/DD/YYYY') {
                return date.toLocaleDateString('en-US', options);
            } else if (dateFormat === 'YYYY-MM-DD') {
                return date.toISOString().split('T')[0];
            } else { // DD/MM/YYYY
                return date.toLocaleDateString('en-GB', options);
            }
        }

        function formatCurrency(amount, withoutSymbol = false) {
            const currency = localStorage.getItem('currency') || 'INR';
            
            if (withoutSymbol) {
                return new Intl.NumberFormat('en-IN', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(amount);
            }
            
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: currency,
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount);
        }

        function getCategoryColor(category) {
            const colors = {
                'Food': 'bg-yellow-100 text-yellow-800',
                'Bus Fair': 'bg-blue-100 text-blue-800',
                'Monthly Fee': 'bg-purple-100 text-purple-800',
                'SSLC': 'bg-pink-100 text-pink-800',
                'Healthcare': 'bg-red-100 text-red-800',
                'Other': 'bg-gray-100 text-gray-800'
            };
            return colors[category] || 'bg-gray-100 text-gray-800';
        }

        function showNotification(message, type) {
            // Remove existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => notification.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // Hide notification after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        function showLoadingSpinner() {
            document.getElementById('loading-spinner').classList.add('active');
        }

        function hideLoadingSpinner() {
            document.getElementById('loading-spinner').classList.remove('active');
        }

        function initializeCharts() {
            // Initialize empty charts
            updateExpenseChart();
            updateMonthlyChart();
        }

        // Filter and sort transactions
        function filterTransactions() {
            const searchTerm = document.getElementById('transaction-search').value.toLowerCase();
            
            let filtered = transactions;
            
            if (searchTerm) {
                filtered = filtered.filter(t => 
                    (t.notes && t.notes.toLowerCase().includes(searchTerm)) ||
                    t.category.toLowerCase().includes(searchTerm)
                );
            }
            
            updateFilteredTransactionsList(filtered);
        }

        function sortTransactions() {
            const sortBy = document.getElementById('transaction-sort').value;
            let sorted = [...transactions];
            
            switch(sortBy) {
                case 'date-desc':
                    sorted.sort((a, b) => new Date(b.date) - new Date(a.date));
                    break;
                case 'date-asc':
                    sorted.sort((a, b) => new Date(a.date) - new Date(b.date));
                    break;
                case 'amount-desc':
                    sorted.sort((a, b) => b.amount - a.amount);
                    break;
                case 'amount-asc':
                    sorted.sort((a, b) => a.amount - b.amount);
                    break;
                case 'category':
                    sorted.sort((a, b) => a.category.localeCompare(b.category));
                    break;
            }
            
            updateFilteredTransactionsList(sorted);
        }

        function updateFilteredTransactionsList(transactionList) {
            const tbody = document.getElementById('transactions-list');
            const cardsContainer = document.getElementById('transactions-cards');
            
            if (transactionList.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center py-8">
                            <div class="empty-state">
                                <i class="fas fa-search empty-state-icon"></i>
                                <p class="text-gray-500 mb-4">No transactions match your search</p>
                                <button onclick="document.getElementById('transaction-search').value=''; filterTransactions();" class="bg-teal-600 text-white px-4 py-2 rounded-lg">
                                    Clear Search
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
                cardsContainer.innerHTML = '';
                return;
            }
            
            // Update table - only show recent transactions (last 10)
            tbody.innerHTML = transactionList.slice(0, 10).map(transaction => `
                <tr class="transaction-row border-b">
                    <td class="py-3">${formatDate(transaction.date)}</td>
                    <td class="py-3">${transaction.notes || transaction.category}</td>
                    <td class="py-3 hidden sm:table-cell">
                        <span class="px-2 py-1 rounded-full text-xs ${getCategoryColor(transaction.category)}">
                            ${transaction.category}
                        </span>
                    </td>
                    <td class="py-3 font-semibold ${transaction.type === 'income' ? 'text-green-600' : 'text-red-600'}">
                        ${transaction.type === 'income' ? '+' : '-'}${formatCurrency(transaction.amount)}
                    </td>
                    <td class="py-3">
                        <div class="tooltip">
                            <button onclick="deleteTransaction(${transaction.id})" class="text-red-600 hover:text-red-800 transition">
                                <i class="fas fa-trash"></i>
                            </button>
                            <span class="tooltiptext">Delete</span>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            // Update cards for mobile
            cardsContainer.innerHTML = transactionList.slice(0, 10).map(transaction => `
                <div class="transaction-card">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-semibold">${transaction.notes || transaction.category}</span>
                        <span class="font-semibold ${transaction.type === 'income' ? 'text-green-600' : 'text-red-600'}">
                            ${transaction.type === 'income' ? '+' : '-'}${formatCurrency(transaction.amount)}
                        </span>
                    </div>
                    <div class="flex justify-between items-center text-sm text-gray-600">
                        <span>${formatDate(transaction.date)}</span>
                        <span class="px-2 py-1 rounded-full text-xs ${getCategoryColor(transaction.category)}">
                            ${transaction.category}
                        </span>
                    </div>
                    <div class="mt-2 flex justify-end">
                        <button onclick="deleteTransaction(${transaction.id})" class="text-red-600 hover:text-red-800 transition">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Welcome banner
        function checkFirstVisit() {
            if (!localStorage.getItem('welcomeBannerShown') && transactions.length === 0) {
                document.getElementById('welcome-banner').style.display = 'flex';
                localStorage.setItem('welcomeBannerShown', 'true');
            }
        }

        function closeWelcomeBanner() {
            document.getElementById('welcome-banner').style.display = 'none';
        }
    </script>
</body>
</html>
